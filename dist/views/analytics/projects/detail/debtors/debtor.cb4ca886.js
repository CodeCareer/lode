!function(){"use strict";angular.module("kt.lode").filter("filterByFormat",["$filter",function(a){return function(b,c){var d=b;switch(c){case"date":d=a("date")(b,"yyyy-MM-dd");break;case"percent":d=a("ktNumber")(b,2,"percent");break;case"currency":d=a("ktNumberLocate")(b);break;default:d=b||"-"}return d}}]).controller("ktDebtorCtrl",["$scope","$location","$state","$stateParams","ktProjectsService","ktDataHelper",function(a,b,c,d,e,f){a.$emit("activeProjectChange",{projectID:d.projectID}),a.shared={},a.shared.filters=[],a.shared.search_filters=[];var g=a.shared.params={page:1,per_page:10},h=a.shared._params={maxSize:10,totalItems:10,subContent:"borrowers",projectID:d.projectID};a.pageChanged=function(){b.search("page",g.page)},a.goTo=function(b,d,e){var f,g={};if(b)if(f=b.replace("dstrbtn_",""),"custom"===e){if(!a.shared.filters.validateByField(b))return;delete a.shared.fParams[b],g[f]=d}else delete a.shared.fParams[f],g[b]=d;c.go(c.current.name,{filter:$.param($.extend({},a.shared.fParams,g))})},a.delFParams=function(b){var c=a.shared.fParams;delete c[b],a.goTo()},a.getFParamsLength=function(){return _.keys(a.shared.fParams).length},e.get($.extend({},h,g,{subContent:"borrowers_settings"}),function(b){a.shared.filters=b.filters,a.shared.search_filters=b.search_filters,a.$broadcast("filtersReady")})}]).controller("ktDebtorTableCtrl",["$scope","$location","ktProjectsService","ktDataHelper",function(a,b,c,d){var e=b.search(),f=a.shared.params,g=a.shared._params,h=a.shared.filters;$.extend(f,e),d.pruneDirtyParams(f,e,["filter"]);var i=a.shared.fParams=d.cutDirtyParams(d.decodeParams(f,["filter"]));h.length?d.filterInit(h)(i):a.$on("filtersReady",function(){d.filterInit(a.shared.filters)(i)}),a.getFormat=function(b){return a.fields[b].format},a.getEducationName=d.getEducationName,c.get($.extend({},g,f,i),function(b){a.borrowers=b.borrowers,a.fields=b.fields,g.totalItems=b.total_items})}])}();