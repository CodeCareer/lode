!function(){"use strict";angular.module("kt.lode").controller("ktOverdueCtrl",["$scope","$location","$stateParams","ktProjectStaticsReportService","ktDateHelper",function(a,b,c,d,e){function f(){var b,e,f;f=a.radioPeriod,f=f.split("~"),b=f[0],e=f[1],d.get($.extend({projectID:c.projectID,type:"trends",dimention:"risk",start_date:b,end_date:e},g),function(b){a.data=b,a.overdueRateChart.chartOptions=$.extend(!0,{},h,{legend:{data:_.map(b.overdue_trends.reverse().filter(function(a){return!_.includes(["逾期率","不良率"],a.name)}),"name")},xAxis:{type:"category",data:b.dates},series:_.map(b.overdue_trends.reverse().filter(function(a){return!_.includes(["逾期率","不良率"],a.name)}),function(a){return a.type="line",a.stack="bar",a.smooth=!0,a.itemStyle={normal:{areaStyle:{type:"default"}}},a})}),a.migrateRateChart.legend=_.chain(b.migration_trends).map(function(a){return{name:a.name,value:!0}}).value(),a.migrateRateChart.chartOptions=$.extend(!0,{},h,{legend:{data:_.map(b.migration_trends,"name")},xAxis:{type:"category",data:b.dates},series:_.map(b.migration_trends,function(a){return a.type="line",a})})})}var g=b.search()||{};e.initPeriod(a,g),a.data={},a.$watch("radioPeriod",function(a,c){if(a!==c&&"custom"!==a){var d=a.split("~");b.search($.extend(g,{start_date:d[0]||null,end_date:d[1]||null}))}}),a.overdueRateChart={overdueTab:!0,badTab:!0,radioDataShowType:"table",chartOptions:{}},a.migrateRateChart={legend:[],radioDataShowType:"table",chartDimension:"逾期率",chartOptions:{}};var h={tooltip:{axisPointer:{type:"line"},yAxisFormat:"percent"}};f()}])}();