!function(){"use strict";angular.module("kt.lode").controller("ktProjectEditCtrl",["$scope","$state","$window","$stateParams","ktSweetAlert","ktProjectsService","ktInstitutionsService",function(a,b,c,d,e,f,g){a.$emit("activeProjectChange",{projectID:d.projectID}),a.datepickerSettings={singleDate:!0,showShortcuts:!1,autoClose:!0,time:{enabled:!0}},g.get({inst_type:"zhudai"},function(b){a.institutions=b.institutions}),f.get({projectID:d.projectID},function(b){a.project=b.project,a.project.projectID=d.projectID}),a.cancel=function(a){a.preventDefault(),c.history.back()},a.submitForm=function(){return f.update(a.project).$promise.then(function(){e.swal({title:"提示",text:"项目信息修改成功",type:"success"},function(){b.go("analytics.project.settings.info")}),a.$emit("activeProjectUpdate",a.project)},function(b){a.pendingRequests=!1,e.swal({title:"提示",text:$.isArray(b.error)?b.error.join("<br/>"):b.error||"抱歉，项目信息修改失败！",type:"error"})}),!1}}])}();