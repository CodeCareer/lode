!function(){"use strict";angular.module("kt.lode").controller("ktProjectAddCtrl",["$scope","$window","$state","$stateParams","ktSweetAlert","ktProjectsService","ktInstitutionsService",function(a,b,c,d,e,f,g){a.datepickerSettings={singleDate:!0,showShortcuts:!1,autoClose:!0,time:{enabled:!0}},g.get({inst_type:"zhudai"},function(b){a.institutions=b.institutions}),a.project={type:"presentation"},a.cancel=function(a){a.preventDefault(),b.history.back()},a.submitForm=function(){return f.save(a.project).$promise.then(function(b){e.swal({title:"提示",text:"项目新增成功",type:"success"},function(){c.go("analytics.projects.list.table")}),a.project.id=b.id,a.$emit("activeProjectUpdate",a.project)},function(b){a.pendingRequests=!1,e.swal({title:"提示",text:$.isArray(b.error)?b.error.join("<br/>"):b.error||"抱歉，项目新增失败！",type:"error"})}),!1}}])}();