!function(){"use strict";angular.module("kt.lode").controller("ktProjectsCtrl",["$scope","$location","$stateParams","ktInstitutionsService",function(a,b,c,d){a.$emit("activeProjectChange",{projectID:c.projectID}),a.params={maxSize:5,page:1,per_page:10,zhudai_id:"all",account_id:"all"},d.get({inst_type:"zhudai"},function(b){b.institutions.unshift({id:"all",name:"全部机构"}),a.institutions=b.institutions}),a.getInstitutionName=function(){var b=_.find(a.institutions,function(b){return b.id==a.params.zhudai_id})||{};return b.name},a.pageChanged=function(){b.search("page",a.params.page)},a.institutionChanged=function(a){b.search($.extend(b.search(),{zhudai_id:a||null,page:1,per_page:10}))},a.stateChanged=function(){b.search($.extend(b.search(),{status:a.params.status||null,page:1,per_page:10}))}}]).controller("ktProjectsTableCtrl",["$scope","$location","$state","ktProjectsService",function(a,b,c,d){a.projects=[];var e=b.search();$.extend(a.params,e),d.get(a.params,function(b){a.projects=b.projects,a.params.totalItems=b.total_items})}])}();