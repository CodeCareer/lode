<div id="loadPlanDetail" class="row" kt-animate-panel child="hpanel">
    <div class="col-lg-12">
        <!-- <div class="content-header clfix">
            <div class="btns fl">
                <a class="btn btn-sm btn-default" ui-sref="analytics.project.finance.billList.table">&lt;&lt;返回列表</a>
            </div>
        </div> -->
        <div class="hpanel">
            <div class="panel-heading clfix">
                <h5>还款账单明细</h5>
                <div class="fl mt8 f12">
                    <dl class="ib mb0 ml10">
                        <dt class="ib">账单类型：</dt>
                        <dd class="ib" ng-bind="getTypeName(bill.type)"></dd>
                    </dl>
                    <dl class="ib mb0 ml10">
                        <dt class="ib">账单日期：</dt>
                        <dd class="ib" ng-bind="bill.repay_at"></dd>
                    </dl>
                    <dl class="ib mb0 ml10">
                        <dt class="ib">子项目：</dt>
                        <dd class="ib" ng-bind="bill.name"></dd>
                    </dl>
                    <dl class="ib mb0 ml10">
                        <dt class="ib">批次：</dt>
                        <dd class="ib" ng-bind="bill.number"></dd>
                    </dl>
                    <dl class="ib mb0 ml10">
                        <dt class="ib">还款期数：</dt>
                        <dd class="ib" ng-bind="'第 '+ bill.stage + ' 期'"></dd>
                    </dl>
                    <dl class="ib mb0 ml10" ng-if="bill.status === 'done'">
                        <dt class="ib">状态：</dt>
                        <dd class="ib"><i class="glyphicon glyphicon-ok approved-color mr5"></i>已确认</dd>
                    </dl>
                </div>
                <div class="fr" ng-if="bill.status !== 'done'">
                    <a class="btn btn-dark btn-sm ml10" ng-click="confirmBill(id)">确认账单</a>
                </div>
            </div>
            <div class="panel-body clfix">
                <div class="ov-h">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="chart-table">
                                <div class="chart-table-heading clfix">
                                    <div class="f14 pl10 fl">账单摘要</div>

                                </div>
                                <div class="dashboard-list">
                                    <ul class="tier-list">
                                        <li class="item-l1">
                                            <div class="key-name">当前应收还款总额：</div>
                                            <div class="value" ng-bind="summary.amount | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">当期还款本息总额：</div>
                                            <div class="value" ng-bind="summary.pri_int_amount | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l3">
                                            <div class="key-name">当期还款本金：</div>
                                            <div class="value" ng-bind="summary.repay_principle | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l3">
                                            <div class="key-name">当期还款利息：</div>
                                            <div class="value" ng-bind="summary.repay_interest | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">当期提前还款本金：</div>
                                            <div class="value" ng-bind="summary.ahead_principle | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">累计逾期金额：</div>
                                            <div class="value" ng-bind="summary.overdue_total_amount | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">累计逾期罚息：</div>
                                            <div class="value" ng-bind="summary.overdue_total_fine | ktNumberLocate"></div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-body clfix">
                <div class="ov-h">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="chart-table">
                                <div class="chart-table-heading clfix">
                                    <div class="f14 pl10 fl br pr10">个人明细</div>
                                    <div class="dropdown fl" dropdown>
                                        <div dropdown-toggle class="dropdown-toggle cp">
                                            <span ng-bind="getStatusName()"></span><b class="icon-lode icon-arrow">&#xe805;</b>
                                        </div>
                                        <div class="dropdown-menu animated fadeIn m-t-xs">
                                            <ul>
                                                <li ng-repeat="status in statusList" ng-class="{active: params.status === status.value}">
                                                    <a ng-click="statusChange(status.value)" title="{{status.name}}" ng-bind="status.name"></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive table-body">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr class="text-left">
                                                <th>借款人账户号</th>
                                                <th>姓名</th>
                                                <th>身份证号</th>
                                                <th>还款状态</th>
                                                <th>当期应还本金</th>
                                                <th>当期应还利息</th>
                                                <th>提前还款本金</th>
                                                <th>提前还款违约金</th>
                                                <th>累计逾期金额</th>
                                                <th>累计逾期罚息</th>
                                                <th>当期贷款服务费</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="text-right" ng-repeat="repayment in bill.repayments">
                                                <th class="text-left" ng-bind="::repayment.bank_account"></th>
                                                <td ng-bind="::repayment.name"></td>
                                                <td ng-bind="::repayment.identity_num"></td>
                                                <td ng-bind-html="::getStatusNameNice(repayment.status)"></td>
                                                <td ng-bind="::repayment.repay_principle | ktNumberLocate"></td>
                                                <td ng-bind="::repayment.repay_interest | ktNumberLocate"></td>
                                                <td ng-bind="::repayment.ahead_principle | ktNumberLocate"></td>
                                                <td ng-bind="::repayment.ahead_compensation | ktNumberLocate"></td>
                                                <td ng-bind="::repayment.overdue_total_amount | ktNumberLocate"></td>
                                                <td ng-bind="::repayment.overdue_total_fine | ktNumberLocate"></td>
                                                <td ng-bind="::repayment.service_fees | ktNumberLocate"></td>
                                            </tr>
                                            <tr ng-if="(!bill.repayments.length || !bill.repayments) && !isLoading()">
                                                <td colspan="12" class="text-info text-center">
                                                    <i class="pe-7s-attention f20 mr5"></i>
                                                    <span class="f16">没有数据！</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <pagination total-items="params.totalItems" items-per-page="params.per_page" ng-change="pageChanged()" max-size="params.maxSize" ng-model="params.page" class="pagination-sm fr"></pagination>
                </div>
            </div>
        </div>
    </div>
</div>
