<div id="loadPlanDetail" class="row" kt-animate-panel child="hpanel">
    <div class="col-lg-12">
        <!-- <div class="content-header clfix">
            <div class="btns fl">
                <a class="btn btn-sm btn-default" ui-sref="analytics.project.finance.statement.ist.table">&lt;&lt;返回列表</a>
            </div>
        </div> -->
        <div class="hpanel">
            <div class="panel-heading clfix">
                <!-- <h5>还款账单明细</h5> -->
                <div class="fl mt8 f13">
                    <dl class="ib mb0">
                        <dt class="ib">子项目：</dt>
                        <dd class="ib" ng-bind="statement.subproject_name"></dd>
                    </dl>
                    <dl class="ib mb0 ml20">
                        <dt class="ib">批次：</dt>
                        <dd class="ib" ng-bind="statement.batch_no"></dd>
                    </dl>
                    <dl class="ib mb0 ml20">
                        <dt class="ib">账单类型：</dt>
                        <dd class="ib" ng-bind="getTypeName(statement.type)"></dd>
                    </dl>
                    <dl class="ib mb0 ml20">
                        <dt class="ib">账单日期：</dt>
                        <dd class="ib" ng-bind="statement.due_date"></dd>
                    </dl>
                    <dl class="ib mb0 ml20">
                        <dt class="ib">还款期数：</dt>
                        <dd class="ib" ng-bind="statement.term"></dd>
                    </dl>
                    <!-- <dl class="ib mb0 ml10" ng-if="statement.status === 'checked'">
                        <dt class="ib">状态：</dt>
                        <dd class="ib"><i class="glyphicon glyphicon-ok approved-color mr5"></i>已确认</dd>
                    </dl> -->
                </div>
                <div class="fr mt8 f12" ng-if="statement.status === 'checked'">
                    <span><i class="glyphicon glyphicon-ok approved-color mr5"></i>已确认</span>
                </div>
                <div class="fr" ng-if="statement.status !== 'checked'">
                    <a class="btn btn-dark btn-sm ml10" ng-click="confirmBill(id)">确认账单</a>
                </div>
            </div>
            <div class="panel-body clfix">
                <div class="ov-h">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="chart-table bg-none">
                                <div class="chart-table-heading tab-like clfix">
                                    <div class="f14 pl10 pr10 fl tab">账单摘要</div>
                                </div>
                                <div class="dashboard-list">
                                    <ul class="tier-list">
                                        <li class="item-l1">
                                            <div class="key-name">当前应收还款总额：</div>
                                            <div class="value" ng-bind="summary.total_pymnt | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">当期还款本息总额：</div>
                                            <div class="value" ng-bind="statement.total_pymnt | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l3">
                                            <div class="key-name">当期还款本金：</div>
                                            <div class="value" ng-bind="statement.total_pymnt_prncp | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l3">
                                            <div class="key-name">当期还款利息：</div>
                                            <div class="value" ng-bind="(statement.total_pymnt - statement.total_pymnt_prncp) | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">当期提前还款本金：</div>
                                            <div class="value" ng-bind="summary.ahead_principle | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">累计逾期金额：</div>
                                            <div class="value" ng-bind="summary.overdue_total_amount | ktNumberLocate"></div>
                                        </li>
                                        <li class="item-l2">
                                            <div class="key-name">累计逾期罚息：</div>
                                            <div class="value" ng-bind="summary.overdue_total_fine | ktNumberLocate"></div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-body clfix">
                <div class="ov-h">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="chart-table">
                                <div class="chart-table-heading clfix">
                                    <div class="f14 pl10 fl br pr10">个人明细</div>
                                    <div class="dropdown fl" dropdown>
                                        <div dropdown-toggle class="dropdown-toggle cp">
                                            <span ng-bind="getStatusName()"></span><b class="icon-lode icon-arrow">&#xe805;</b>
                                        </div>
                                        <div class="dropdown-menu animated fadeIn m-t-xs">
                                            <ul>
                                                <li ng-repeat="status in statusList" ng-class="{active: params.status === status.value}">
                                                    <a ng-click="statusChange(status.value)" title="{{status.name}}" ng-bind="status.name"></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="fr">
                                        <a class="download-data f18 ml5 pr10 pl10 va-2 lh1em">
                                            <i class="glyphicon glyphicon-download-alt"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="table-responsive table-body">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr class="text-left">
                                                <th>借款人账户号</th>
                                                <th>姓名</th>
                                                <th>身份证号</th>
                                                <th>还款状态</th>
                                                <th>当期应还本金</th>
                                                <th>当期应还利息</th>
                                                <th>提前还款本金</th>
                                                <th>提前还款违约金</th>
                                                <th>累计逾期金额</th>
                                                <th>累计逾期罚息</th>
                                                <th>当期贷款服务费</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="text-right" ng-repeat="payment_detail in statement.payment_details">
                                                <th class="text-left" ng-bind="::payment_detail.recpt_acct_no"></th>
                                                <td ng-bind="::payment_detail.name"></td>
                                                <td ng-bind="::payment_detail.id_no"></td>
                                                <td ng-bind-html="::getStatusName(payment_detail.status)"></td>
                                                <td ng-bind="::payment_detail.pymnt_prncp | ktNumberLocate"></td>
                                                <td ng-bind="::payment_detail.pymnt_int | ktNumberLocate"></td>
                                                <td ng-bind="::payment_detail.ahead_principle | ktNumberLocate"></td>
                                                <td ng-bind="::payment_detail.ahead_compensation | ktNumberLocate"></td>
                                                <td ng-bind="::payment_detail.overdue_total_amount | ktNumberLocate"></td>
                                                <td ng-bind="::payment_detail.overdue_total_fine | ktNumberLocate"></td>
                                                <td ng-bind="::payment_detail.service_fees | ktNumberLocate"></td>
                                            </tr>
                                            <tr ng-if="!statement.payment_details.length && !isLoading()">
                                                <td colspan="12" class="text-info text-center">
                                                    <i class="pe-7s-attention f20 mr5"></i>
                                                    <span class="f16">没有数据！</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <uib-pagination total-items="params.totalItems" items-per-page="params.per_page" ng-change="pageChanged()" max-size="params.maxSize" ng-model="params.page" class="pagination-sm fr"></uib-pagination>
                </div>
            </div>
        </div>
    </div>
</div>
